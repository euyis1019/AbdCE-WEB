{"ast":null,"code":"import { createRouter, createWebHashHistory } from 'vue-router';\nimport Login from '../views/Login.vue';\nimport mainbox from '../views/MainBox.vue';\nimport RoutesConfig from './config.js';\nimport store from \"../store/index\";\nconst routes = [{\n  path: \"/login\",\n  name: \"login\",\n  component: Login\n}, {\n  path: \"/mainbox\",\n  name: \"mainbox\",\n  component: mainbox\n}];\nconst router = createRouter({\n  history: createWebHashHistory(),\n  routes\n});\n//路由拦截\nrouter.beforeEach((to, _from, next) => {\n  if (to.name === 'login') {\n    next();\n  } else {\n    //是否授权\n    if (!localStorage.getItem(\"token\")) {\n      //abcd.com/index?t=123456789,其实就是这一块\n      next({\n        path: \"/login\"\n      });\n    } else {\n      //后期拓展很多页面的话用config.js配置循环路由\n      //ConfigRouter()直接配置会死循环\n      if (!store.state.isGetterRouter) {\n        ConfigRouter();\n        next({\n          path: to.fullPath\n        });\n      } else {\n        next();\n      }\n    }\n  }\n});\nconst ConfigRouter = () => {\n  RoutesConfig.forEach(item => {\n    router.addRoute(\"mainbox\", item);\n  });\n  store.commit(\"changeGetterRouter\", true);\n};\n/*router.addRoute(\"mainBox\",{\n  path:\"/Report\",\n  component:ReportForm\n})\nrouter.addRoute(\"mainBox\",{\n  path:\"/Record\",\n  component:ApplicationRecord\n})*/\nexport default router;","map":{"version":3,"names":["createRouter","createWebHashHistory","Login","mainbox","RoutesConfig","store","routes","path","name","component","router","history","beforeEach","to","_from","next","localStorage","getItem","state","isGetterRouter","ConfigRouter","fullPath","forEach","item","addRoute","commit"],"sources":["/Users/eric/Documents/GitHub/AbdCE-WEB/src/router/index.js"],"sourcesContent":["import {  createRouter, createWebHashHistory } from 'vue-router'\nimport Login from '../views/Login.vue'\nimport mainbox from '../views/MainBox.vue'\nimport RoutesConfig from './config.js'\nimport store from \"../store/index\"\n\n\nconst routes = [\n  {\n    path:\"/login\",\n    name:\"login\",\n    component:Login\n  },\n  {\n    path:\"/mainbox\",\n    name:\"mainbox\",\n    component:mainbox\n  }\n]\n\nconst router = createRouter({\n  history: createWebHashHistory(),\n  routes\n})\n//路由拦截\nrouter.beforeEach((to,_from,next)=>{\n    if(to.name==='login'){\n      next()\n    }else{\n      //是否授权\n      if(!localStorage.getItem(\"token\")){\n      //abcd.com/index?t=123456789,其实就是这一块\n        next({\n          path:\"/login\"\n        })\n      }else{\n        //后期拓展很多页面的话用config.js配置循环路由\n        //ConfigRouter()直接配置会死循环\n        if(!store.state.isGetterRouter){\n          ConfigRouter()\n          next({\n            path:to.fullPath\n          })\n        }\n        else{\n          next()\n        }\n      }\n    }\n  })\n\n\nconst ConfigRouter = ()=>{\n  RoutesConfig.forEach(item=>{\n    router.addRoute(\"mainbox\",item)\n  })\n\n  store.commit(\"changeGetterRouter\", true)\n}\n/*router.addRoute(\"mainBox\",{\n  path:\"/Report\",\n  component:ReportForm\n})\nrouter.addRoute(\"mainBox\",{\n  path:\"/Record\",\n  component:ApplicationRecord\n})*/\nexport default router\n"],"mappings":"AAAA,SAAUA,YAAY,EAAEC,oBAAoB,QAAQ,YAAY;AAChE,OAAOC,KAAK,MAAM,oBAAoB;AACtC,OAAOC,OAAO,MAAM,sBAAsB;AAC1C,OAAOC,YAAY,MAAM,aAAa;AACtC,OAAOC,KAAK,MAAM,gBAAgB;AAGlC,MAAMC,MAAM,GAAG,CACb;EACEC,IAAI,EAAC,QAAQ;EACbC,IAAI,EAAC,OAAO;EACZC,SAAS,EAACP;AACZ,CAAC,EACD;EACEK,IAAI,EAAC,UAAU;EACfC,IAAI,EAAC,SAAS;EACdC,SAAS,EAACN;AACZ,CAAC,CACF;AAED,MAAMO,MAAM,GAAGV,YAAY,CAAC;EAC1BW,OAAO,EAAEV,oBAAoB,CAAC,CAAC;EAC/BK;AACF,CAAC,CAAC;AACF;AACAI,MAAM,CAACE,UAAU,CAAC,CAACC,EAAE,EAACC,KAAK,EAACC,IAAI,KAAG;EAC/B,IAAGF,EAAE,CAACL,IAAI,KAAG,OAAO,EAAC;IACnBO,IAAI,CAAC,CAAC;EACR,CAAC,MAAI;IACH;IACA,IAAG,CAACC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,EAAC;MAClC;MACEF,IAAI,CAAC;QACHR,IAAI,EAAC;MACP,CAAC,CAAC;IACJ,CAAC,MAAI;MACH;MACA;MACA,IAAG,CAACF,KAAK,CAACa,KAAK,CAACC,cAAc,EAAC;QAC7BC,YAAY,CAAC,CAAC;QACdL,IAAI,CAAC;UACHR,IAAI,EAACM,EAAE,CAACQ;QACV,CAAC,CAAC;MACJ,CAAC,MACG;QACFN,IAAI,CAAC,CAAC;MACR;IACF;EACF;AACF,CAAC,CAAC;AAGJ,MAAMK,YAAY,GAAGA,CAAA,KAAI;EACvBhB,YAAY,CAACkB,OAAO,CAACC,IAAI,IAAE;IACzBb,MAAM,CAACc,QAAQ,CAAC,SAAS,EAACD,IAAI,CAAC;EACjC,CAAC,CAAC;EAEFlB,KAAK,CAACoB,MAAM,CAAC,oBAAoB,EAAE,IAAI,CAAC;AAC1C,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAef,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}